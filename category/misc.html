<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hannah Clare Wray Hazi | articles in the "misc" category</title>
    <link rel="shortcut icon" type="image/png" href="../favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
    <link rel="stylesheet" href="../theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="../theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Hannah Hazi" />
</head>
<body>
    <header>
        <nav>
            <ul>

                <li class="ephemeral selected"><a href="../category/misc.html">misc</a></li>
                <li><a href="../">Home</a></li>
                <li><a href="../pages/about.html">About Me</a></li>
                <li><a href="https://github.com/raspberrycheesecake">GitHub</a></li>
                <li><a href="mailto:hannah.hazi@cantab.net">Contact Me</a></li>
                <li><a href="https://uk.linkedin.com/in/hannah-hazi-9b985a84">LinkedIn</a></li>
                <li><a href="../archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="../">Hannah Clare Wray Hazi</a></h1>
            <h2>I love making beautiful things.</h2>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Dec 31, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../legacy-code.html" rel="bookmark" title="Permanent Link to &quot;The Knowledge in the Code&quot;">The Knowledge in the Code</a>
                </h2>

                
                

                <p>My colleagues and I were discussing legacy code the other day. Someone gave the pretty common opinion that, if there was time, they would of course completely re-write all the legacy code they came across, from scratch. But, since this is not an ideal world and time is limited, they would settle for refactoring what they could. It got me thinking about how my own attitude toward legacy code has changed over time, and why that is.</p>
<h2>Indiana Jones and the Lost Code</h2>
<p>I spent one summer at university working on a classic legacy code problem. A scientist had written a large piece of Fortran 95 to simulate a manufacturing process for my employers. He had long since retired and there was no way to contact him to ask about his work. As an intern I was asked to add a little bit of extra functionality. They were still using the code and found it reliable, but wanted to add a feature. I felt like an archaeologist, dusting off terse variable names and cryptic comments, trying to understand not only this code but the complex processes it was simulating, too. It was very difficult to get anywhere.</p>
<p><img alt="Uncovering the secret of the Lost Code" src="../images/indy-uncovers-artifact.jpg">
<em>I wonder if I can replace this function without adding test coverage?</em></p>
<p>My initial reaction - rewrite it! I think most programmers share this instinct. My idea was to tear it down completely and rebuild it, preferrably in a different, more modern language. Then, I felt, I could add the features that were needed. But my manager was adamantly against this. As a summer intern, I would leave soon anyway. If I rewrote the code in another language, where was the benefit to the company? From their perspective, they already had a tool that worked fine. They just needed someone to understand what they already had and improve it a bit. At the time I was frustrated by this. I would tell others the tale with a wistful air - "If only I had had the time to rewrite it properly" I would think, "it would have been so much better". But would it have?</p>
<h2>Why Rewrite Code?</h2>
<p>I've come across a few different reasons for re-writing code completely. None of them really convince me of their merits anymore.</p>
<ul>
<li><strong>To write it in a new language.</strong></li>
</ul>
<p>The new language is considered to be 'better' - it has features you want, or the old language is considered passe. Fortran 95 certainly wasn't the best language to be writing new code in anymore! For one thing, there was a severe restriction on variable and routine name lengths - in order to maintain backward compatibility with earlier versions of the language, none of the variables was over 6 characters in length, which didn't aid readability. But most cases aren't as clear-cut as this - I think most people wouldn't choose to re-write a large C program in Rust even if they think Rust is a superior language in some respects.</p>
<ul>
<li><strong>For understanding.</strong></li>
</ul>
<p>No-one can figure out how the old code works, so we have the idea to learn by doing and completely rewrite it. It's certainly "easier to write code than read it." This is even true of one's own code - returning to something I wrote six months ago, I realised to my regret I left insufficient comments and good names behind - so I had to learn how to understand my own code again, refactoring some of the names once I had worked out what I was doing. But by the same token, if you re-write others' code, there's no guarantee it will be any more readable to the next person - even to yourself, later on. Taking more time to read and understand what the existing code is doing may end up being more valuable. Perhaps one of the problems with this approach is that programmers feel guilty for spending some of their work time 'just reading' other people's code. It doesn't feel like a productive activity in the same way as re-writing. Reading old code just produces understanding in your mind, no tangible output.</p>
<ul>
<li><strong>You don't trust the people who wrote the code.</strong></li>
</ul>
<p>'Not Invented Here' syndrome. Especially since <a href="http://gamedevwithoutacause.com/?p=1329">many programmers have poor code reading skills</a> it's difficult to relax and trust unknown programmers. We can't easily just grok their code and be reassured that it's solid - so fear creeps in and the idea of a complete re-write or making our own version from scratch seems more appealing. If your instinct is not to trust the unknown, it becomes even harder:</p>
<blockquote>
<p>"You can’t look down on someone when you read their code. If you don’t respect the person writing the code, you won’t be able to apply the energy needed to understand it." - Keiichi Yano <a href="https://twitter.com/CaptivNation">@CaptivNation</a></p>
</blockquote>
<p>In the Python world this has mostly been overcome when dealing with third-party modules - for some reason, if you can pip install a library function to do what you want, there isn't the same need to question and look under the hood in mistrust at <em>how</em> it does what it does. The module is generally treated as a black box, whose documentation is all you need to work with it. Perhaps this trust has been built up in the Python community over time and isn't readily extendable to other domains - it's certainly a large factor in the appeal of Python as a language.</p>
<ul>
<li><strong>It's ugly</strong></li>
</ul>
<p>And finally the real reason, the one we feel deep-down in our bones: the old code <em>looks</em> bad - it's flaky, it doesn't have any test coverage, the relationship between the parts looks crazy. When you read it, you sometimes want to laugh out loud - it's a big hot mess. There is a strong temptation to start again from scratch out of an aesthetic instinct for perfection.</p>
<h2>Why Keep Code?</h2>
<ul>
<li><strong>Commercial concerns</strong></li>
</ul>
<p>Joel Spolsky of Joel on Software fame has called rewriting source code from scratch <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">"the single worst strategic mistake that any software company can make"</a>. Spolsky uses the example of Netscape 6.0 to demonstrate why as a corporate strategy, complete re-writes are almost never a good idea. They tend take longer than anticipated (because people are bad at working out how long it will take), and burn time and resources for no appreciable reward until the very end when the new code is ready - by which time, a competitor has probably caught up to you and eaten your lunch. There are almost no commercial examples where a complete re-write turned out to be a good idea. Sometimes as a programmer you need to 'zoom out' and take a more general view of your company's trajectory, and how time spent on re-writes and refactoring fits into it.</p>
<p>Of course, companies also need to take care not to pressure their programmers into behaving in this negative way. If you're rewarded based on new code output or some other metric that doesn't take into account the increase in understanding from reading others' code, it can be hard to fight the instinct to re-write code more than you should. Managers should try to grow their programmers' understanding of the existing codebase and allow time for them to read code as an activity of value in itself. Taking a leaf from <a href="https://raspberrycheesecake.github.io/peopleware.html">Peopleware</a> and accepting that 'human resources' are individuals who are not interchangeable and who contain valuable institutional knowledge should help here.</p>
<ul>
<li><strong>Code learns</strong></li>
</ul>
<p>As Joel also points out, 'hairy' legacy code functions embody years of bug fixes and reactions to specific situations. But not only that. Legacy code often embodies knowledge about a process, knowledge that is very difficult to recapture. The writers might have left the company, or been run over by a bus! Re-writing doesn't recapture all the nuances of the understanding embedded in the old codebase, and can leave important institutional knowledge behind. This knowledge might not be documented in any other way. I've lost count of the times an old comment or variable name has led me in a valuable direction to a deeper understanding of changes to our hardware, for example. This sort of thing would be lost, throwing the baby out with the bathwater, if the code had been completely re-written by someone who didn't keep the old comments they didn't understand.</p>
<ul>
<li><strong>Refactoring can give the best of both worlds</strong></li>
</ul>
<p>It can be difficult to get the balance right between too many re-writes on the one hand and leaving flawed, buggy existing code alone on the other. My own experience at <a href="www.cmedrobotics.com">CMR</a> has definitely taught me the value of keeping and improving on an existing codebase. Through resisting the temptation to stop and completely re-write parts of the Python codebase, we have come further and faster than we could have done otherwise, and managed to still continue improving as we go along. Refactoring is sometimes used as a synonymn for re-writing, but it's actually a different approach. Refactoring values existing code and makes the base assumption that it is valuable and should be preserved. By adding tests, old code can be refactored with the confidence that bugs won't be introduced. Tweaking variable names and adding explanatory comments is generally harmless and can be very valuable. In this way, incrementally refactoring old code can give excellent results, in less time than a complete rewrite. <a href="https://pragprog.com/book/atcrime/your-code-as-a-crime-scene">Your Code as a Crime Scene</a> explains how making improvements to the code can and should be done in a targeted way, rather than by hunches. By focusing on areas with the highest cyclomatic complexity and churn, we direct our energy where it produces the most valuable results. This means the majority of the existing legacy code can be left alone, while still significantly improving the functionality and test coverage.</p>
<h2>A Book Recommendation</h2>
<p>In the course of my research for this post I came across <a href="https://www.spinellis.gr/codereading/">Code Reading</a>, a book about precisely the discipline reading legacy code in order to maintain it and add features. This looks to be a great primer on a neglected skill for programmers. I plan to read it myself and leave a review here in the New Year.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../legacy-code.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/legacy-code.html" class="tags">legacy code</a>
                    &nbsp;<a href="../tag/cruft.html" class="tags">cruft</a>
                    &nbsp;<a href="../tag/refactoring.html" class="tags">refactoring</a>
                </div>
		<a href="../legacy-code.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Oct 30, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../pycon-uk-2017.html" rel="bookmark" title="Permanent Link to &quot;PyCon UK 2017!&quot;">PyCon UK 2017!</a>
                </h2>

                
                

                <p>I spent the last few days at <a href="http://2017.pyconuk.org/">PyCon UK</a>, and thought I'd write a post about my experiences there. It was my first time at the conference and I thoroughly enjoyed it, as you can probably tell from the liberal number of exclamation marks scattered through this post.</p>
<h1>I gave a talk!</h1>
<p>On the first day of the conference I spoke about <a href="https://2017.pyconuk.org/sessions/talks/python-as-a-second-language">Python As a Second Language</a>. The organisers put me in the Biggest Room so I had to fight off some pre-talk nerves,
but I was glad to have the chance to do it and got some lovely feedback afterwards. Thanks again to <a href="https://github.com/emmagordon/">Emma Gordon</a> for encouraging me to give it a go and push my comfort zone! Doing a talk on Thursday also meant I was free to enjoy the rest of the conference without worrying, which I definitely recommend.</p>
<p>For those who are interested, <a href="https://www.youtube.com/watch?v=gwou7CTymS0">a video of my talk is now up on YouTube!</a></p>
<h1>I went to talks and workshops!</h1>
<p>The conference was full of great talks and sessions, so this is just a small sampling of what I particularly remember enjoying. Of course, I'd like to give a shout-out to my colleagues Emma Gordon and Jan Chwiejczak who respectively gave the very silly and fun <a href="https://github.com/emmagordon/python-bee]">Python Spelling Bee</a>, and a (very oversubscribed) workshop on <a href="http://2017.pyconuk.org/sessions/workshops/toying-with-python-bytecode-hands-on-session/">Python Bytecode</a> &amp; lavishly illustrated talk on <a href="http://2017.pyconuk.org/sessions/talks/the-art-of-testing-in-python/">the Art of Testing</a>.</p>
<ul>
<li>
<p><strong>Unsafe At Any Speed</strong> Rae Knowler made some great points about dangerous library defaults, illustrated with scary examples from the wild. I'll be sure to use <code>PyYAML.safe_load()</code> rather than <code>load()</code> from now on...!</p>
</li>
<li>
<p><strong>Shaping the World</strong> David McIver's keyote was thought-provoking and fascinating, not just about software, but ethics, history and human interactions - the sort of thing <a href="https://onfoodandcoding.blogspot.co.uk">Stuart Wray</a> would probably enjoy.</p>
</li>
<li>
<p><strong>Docs or it didn't happen!</strong> I was encouraged to join the Documentarian Club by Mikey Ariel, who gave an inspiring talk about why good documentation is so important.</p>
</li>
<li>
<p><strong>Software's Seven Deadly Wastes</strong> Jez applied the Toyota Production System's 'Seven Wastes' concept to software engineering beautifully - pleasing my manufacturing engineering heart and giving me some food for thought.</p>
</li>
<li>
<p><strong>Circumnavigating the Antarctic with Python and Django</strong> A fascinating talk that cast a light on the challenge developing with no (or a very patchy) Internet connection. What, no googling for StackOverflow posts?! Carles and Jen managed data for 22 scientists on a trip circumnavigating the Antarctic, and built them some useful tools as well like an intranet 'Facebook' and web portal to enter their latest data.</p>
</li>
<li>
<p><strong>The micro:bit talks</strong> I discovered from the team at the micro:bit foundation how the BBC micro:bit is being used by teachers and for STEM outreach. It's a great project and it sounds like it's already having a lot of success getting kids into learning to code in an accessible way.</p>
</li>
<li>
<p><strong>Choo choo! All aboard the Data Train!</strong> It turns out there is a lot of open data available from TfL and National Rail about train movements in the UK. The talk went by quickly but I'll definitely be rewatching to get inspiration for my next project!</p>
</li>
<li>
<p><strong>Lightning Talks</strong> One of the highlights of the conference was the range of lightning talks at the end of each day. Among much else they gave me a great brownie recipe, book recommendations and a moment of meditation calm. A particular favourite was the children's lightning talks - they were so confident speaking about their projects, it was lovely to hear.</p>
</li>
</ul>
<p>The nice thing about PyCon UK is that they <a href="https://www.youtube.com/channel/UChA9XP_feY1-1oSy2L7acog">video all of the talks in the Assembly Room</a>, so I'll be able to go back and watch the ones I missed over the next few weeks, and learn more from the ones I went to.</p>
<p>I didn't take part in many workshops as I was busy manning the CMR stall (we were one of the sponsors so were giving away some free trinkets). I did really enjoy <a href="https://alexwlchan.net/2017/10/pyconuk-2017-resources/">Alex Chan's</a> <strong>A Plumber's Guide To Git</strong> workshop - I think it really helped unpack the inner workings of Git for me. At the end I started to understand what's going on 'under the hood' when I <code>git add</code> and <code>git commit</code> and it's really neat.</p>
<h1>I got swag!</h1>
<p><img alt="schwag" src="../images/socks-swag.jpg"></p>
<p>As well as this snazzy pair of Python socks as a thank-you for giving a talk, I also picked up a free <a href="http://microbit.org">BBC micro:bit</a> delightfully packaged in a sweetie-bag and enjoyed playing with it. For such a small bit of kit is has a surprising range of functions, including an accelerometer, 25 LEDs with variable brightness, two buttons and some I/O. I look forward to using it for embedded projects!</p>
<h1>I met new people!</h1>
<p>One of the best things about PyCon was a chance to meet people using Python from around the UK (and further afield). It was inspiring to see how the language is being used by all sorts of folks. Everyone was friendly and welcoming, and it was a great place to give a talk. I also got the chance to spend more time getting to know people I already was acquainted with from <a href="https://www.meetup.com/CamPUG">CamPUG</a>, the Cambridge Python Users Group, and had some really interesting discussions. </p>
<p>If anyone is thinking of going but isn't sure if it's for them, I'd really reccomend giving PyCon UK a try - the environment is relaxed and friendly, and the organisers try hard to make everyone feel welcome and included. I'll definitely be coming back next year!</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../pycon-uk-2017.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/conference.html" class="tags">conference</a>
                    &nbsp;<a href="../tag/python.html" class="tags">python</a>
                    &nbsp;<a href="../tag/cardiff.html" class="tags">Cardiff</a>
                </div>
		<a href="../pycon-uk-2017.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Apr 18, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../peopleware.html" rel="bookmark" title="Permanent Link to &quot;Peopleware&quot;">Peopleware</a>
                </h2>

                
                

                <p>'Peopleware' is a surprising book. You pick it up expecting a dry tome about (as the subtitle says) productive projects and teams. I only started to read it on the recommendation of a friend, and I'm so glad I did. It's a classic of software development for a reason. It grips you from the very first page as the authors Tom deMarco and Tim Lister lay out a problem familiar to everyone at work - <em>"politics"</em> - and what can be done about it. Peopleware is by turns scathing, hilarious, and wildly optimistic about making the workplace somewhere that's actually fun to be. It's stuffed with war stories that ring very true to anyone who's been stuck in a dysfunctional work environment. Peopleware is everything you hope a project management book could be, and more. Peopleware even recommends my favourite book of all time, <a href="https://en.wikipedia.org/wiki/A_Pattern_Language">'A Pattern Language'</a> (I once dreamed of becoming an architect - this book was the wellspring of that desire) as a sourcebook for designing a good work environment. I finished Peopleware in a single delighted afternoon.</p>
<p><img alt="My mindmap of Peopleware" src="../images/peopleware.jpg">
<em>Here's my mindmap of the first few chapters.</em></p>
<p>"But Hannah!" you say (and since I'm writing this, I can make you say what I want), "This book was written in the Eighties! It uses COBOL as an example of a modern language! How can I take any of its advice seriously?" To which I would reply, as Peopleware does - You are suffering from the High Tech Illusion, which is:</p>
<blockquote>
<p>The widely held conviction among people who deal with any aspect of new technology (as who among us does not?) that they are in an intrinsically high-tech business. They are indulging in the illusion whenever they find themselves explaining at a cocktail party, say, that they are "in computers", or "in telecommunications," or "in electronic funds transfer." Just between us, they usually aren't. The researchers who made fundamental breakthroughs in those areas are in a high-tech business. The rest of us are appliers of their work. We use computers and other new technology components to develop our products or organise our affairs. Because we go about this work in teams and projects and other tightly knit working groups, we are mostly in the human communication business. Our successes stem from good human interactions by all participants in the effort, and our failures stem from poor human interactions.</p>
</blockquote>
<p>Even from that small excerpt, you can discern the warm, conversational and down-to-earth style of the book, and the rational sense it makes. Of course it's still relevant today - human interaction hasn't changed very much since the Eighties (or since the dawn of time). It dissects the multifarious ways workplaces can become dysfunctional (beware the Furniture Police!) and then lays out ways to cultivate jelled teams - groups of people excited to work together, who can focus at work, and who create amazing things.</p>
<p>Peopleware is such a good book people are still talking about it, <a href="https://girtby.net/archives/2005/10/26/the-virtual-furniture-police/">elaborating on it</a> and recommending it today, thirty years after it was written. I discovered after I read it that it's the first book on Joel on Software's <a href="http://new.joelonsoftware.com/navLinks/fog0000000262.html">Programmer's Bookshelf</a>. Joel says, "I can't recommend this book highly enough. It is the one thing every software manager needs to read... not just once, but once a year." It's also one of Kevin Kelley's <a href="http://kk.org/cooltools/peopleware/">'Cool Tools'</a>. It's that kind of book.</p>
<p>Don't just take my word for it. Go and <a href="https://www.safaribooksonline.com/library/view/peopleware-productive-projects/9780133440706/">read</a> Peopleware! It'll be time well spent.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../peopleware.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/humans.html" class="tags">Humans</a>
                    &nbsp;<a href="../tag/work.html" class="tags">Work</a>
                    &nbsp;<a href="../tag/software-development.html" class="tags">Software Development</a>
                    &nbsp;<a href="../tag/relationships.html" class="tags">Relationships</a>
                </div>
		<a href="../peopleware.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Mar 13, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../additive-manufacturing-rant.html" rel="bookmark" title="Permanent Link to &quot;Additive Manufacturing Is Not Going To Save The World (Sorry)&quot;">Additive Manufacturing Is Not Going To Save The World (Sorry)</a>
                </h2>

                
                

                <h1>What are we talking about here?</h1>
<p>Additive manufacturing, more popularly known as 3D printing, isn't just one thing. It describes a vast range of technologies. What they have in common is that they use repeated computer controlled deposition or binding, layer by layer, of materials to build up a product. The additive technologies have improved to the point where some can be used to produce final parts for end users as well as prototypes and ‘looks-like’ models. Real customers have been found for 3D printed products, especially in the medical sector. Hearing aid shells, dental braces, shoe inserts and other low volume, complex, bespoke products are places additive manufacture has an advantage over conventional production as a final production technique. As an enthusiast for additive manufacturing that's really good to see. But there's still a lot of hype and misunderstanding around the technologies. I'd like to clear that up here, in what will (unashamedly) be a bit of a long and ranty post. So strap in!</p>
<p><img alt="3D printing processes" src="../images/3d-print-processes.jpg"> </p>
<p>Additive manufacturing technologies have existed for decades, but the recent development of smaller, more accessible machines has drawn media attention. The vision of a world of distributed manufacture, where the means of production sit on every desktop, is compelling. The technology has been hyped by commentators as the manufacturing tool of the future – something that will <a href="https://www.amazon.co.uk/d/Books/3D-Printing-Next-Industrial-Revolution-Christopher-Barnatt/148418176X">“transform our lives”</a>, <a href="https://www.amazon.co.uk/Makers-Industrial-Revolution-Chris-Anderson/dp/1847940676">“revolutionise the global economy”</a> and <a href="https://www.amazon.co.uk/Printing-Technology-Capitalize-Distributed-Manufacturing-ebook/dp/B00B1UKZC6">“change the future of industry”</a>. Enthusiasts advocating for the power of additive manufacturing tend to say things like</p>
<blockquote>
<p>"I don’t pretend to be impartial. This is a future I believe in, and I’m one of many working to build it." 
- Chris Anderson, Makers: The New Industrial Revolution</p>
<p>"3D printing will change the way things are produced more in this century than the industrial revolution did over the last 300 years... Industrial 3D printing will <a href="https://www.forbes.com/sites/ricksmith/2015/06/15/3d-printing-is-about-to-change-the-world-forever/#1a967e092b43">forever change the world</a> as we know it. Are <em>you</em> ready?" - Rick Smith, Forbes</p>
</blockquote>
<p>I used to be one of these very excited people. To a certain extent, I still am - there are some wonderful things that only additive manufacturing can achieve, and it really is transforming certain industries. For example, the hearing aid business has <a href="http://ratio.se/app/uploads/2015/12/cs_3dprinting_hearingaid_262.pdf">undergone a quiet revolution</a>. All hearing aid shell manufacturers now offer personalised shells made by additive processes such as SLA and SLS. Dental implants aren't far behind.</p>
<p><img alt="Gartner's Hype Cycle" src="../images/hype.png"> </p>
<p>However, the fact is that additive manufacturing is not commercially viable for producing larger numbers of products. For production runs of over around 500, conventional production technologies are far more practical. Additive manufacturing is currently expensive, slow, requires more design time than commonly imagined and constrains production to small batches. <a href="http://www.gartner.com/newsroom/id/3117917">Gartner’s Hype Cycle</a> for 3D Printing predicts that both 'Consumer 3D printing' and '3D printing in Manufacturing Operations' will soon come out of the ‘Peak of Inflated Expectations’ and enter the ‘Trough of Disillusionment’ soon.</p>
<h1>How far have we gotten toward World Domination?</h1>
<h2>At the desktop level</h2>
<p>There have been game-changing reductions in the cost of less sophisticated machines. This has been driven by hobbyists and open-source developers such as the RepRap project led by Dr Adrian Bowyer. RepRapPro recently became a victim of its own success, closing for business in January and releasing a statement that</p>
<blockquote>
<p>"“The market for low-cost 3D printers is now so crowded and so competitive that a small specialist company like ours cannot expand. So, because we are not bankrupt and we do not have any debts to pay, we have chosen to stop now while we are ahead and to concentrate on other activities.” - RepRapPro</p>
</blockquote>
<p>A message from Dr Bowyer on the RepRap.org forums explains further that</p>
<blockquote>
<p>“this great flowering of small companies (all essentially based on the RepRap Project) making commercial life difficult for each other was pretty-much what I predicted when I started the Project… But we expected it to take decades, not four years.”</p>
</blockquote>
<p>A typical small desktop FDM machine now costs in the region of hundreds of pounds. Profit margins on these hobbyist machines have eroded and no further large drops in price may be reasonably expected.</p>
<p>Desktop printers were created that would work ‘out of the box’ without the need for great additive knowledge and DIY skills. Firms like MakerBot and Ultimaker targeted those who want to access the technology but do not have the skills or time to build and maintain their own printers. However, this new generation of machines is still not reliable. MakerBot took an ‘Apple’ approach to development and hid the complexity of their product from users, closing the source code and preventing user modifications. Sadly, desktop printers are not yet reliable enough to be operated by unskilled users without significant risks of failure. MakerBot is now <a href="http://makezine.com/2015/07/14/makerbot-faces-class-action-lawsuit-over-faulty-extruders/.">facing a class action suit about failures of its ‘Smart Extruder’</a> and has been called a <a href="http://hackaday.com/2016/04/28/the-makerbot-obituary/">“dead company walking”</a> after laying off its manufacturing staff, closing its retail locations and outsourcing all production to China. (Update: the class action lawsuit <a href="https://3dprintingindustry.com/news/class-action-makerbot-dismissed-85388/">was dismissed</a> but 3dPrintIndustry is still calling the company "a shadow of its former self").</p>
<blockquote>
<p>"Anyone who has ever been to a hackerspace has seen a MakerBot printer, but that printer was broken." - Brian Benchoff, HackaDay</p>
</blockquote>
<p>Whether using a pre-assembled machine or a kit made from open-source parts, what can be printed with a desktop FDM (fused deposition modelling) machine is mostly limited to plastic trinkets that “looks like I bought it in a panic at a jumble sale for 10p” as <a href="https://www.theguardian.com/lifeandstyle/2013/dec/02/christmas-presents-3d-printer-gun-gifts">a journalist observed</a>. A typical quote from a ‘Maker’ I interviewed at Newcastle MakerSpace was “I do spend more time trying to fix the printer than printing things”. An insightful member of the ‘Maker’ community <a href="https://chickengrylls.wordpress.com/">Dominic Morrow</a> pointed out in an interview with me for my Masters project a couple years back</p>
<blockquote>
<p>“In our community – the maker community and hackspace community – 3D printing isn’t about 3D printing, it’s about building a 3D printer.”</p>
</blockquote>
<p>I've experienced this myself and found it quite frustrating. While I generally focused on making things and found the process frustrating on most machines, for many 'makers' the quality of the output is considered secondary to the pleasure of building and tinkering with the printers themselves.</p>
<h2>At the industrial level</h2>
<p>Prototyping houses such as Shapeways, Sculpteo and iMaterialise have succeeded in popularising the larger, more professional additive technologies. They fill a niche by supplying the ability to print with expensive methods such as DMLS (Direct Metal Laser Sintering), which is not possible as an individual because the machines are so expensive - millions of pounds. However these companies don’t offer anything fundamentally new to manufacturing except for their business model. Their machines can produce higher quality results than the desktop machines and at a larger scale. But they are still slow compared to conventional processes such as injection moulding or milling and they require skilled operation. </p>
<p>Sculpteo released <a href="https://www.sculpteo.com/static/0.30.0-126/download/ebooks/Sculpteo_Guide_to_Manufacturing.pdf">a white paper on the batch size problem</a> recently. For 5 representative parts they compared costs quoted by injection moulding companies Sinomould, Quickpart and Protomould to their own print-costing algorithm for SLS. Injection moulding is a conventonal manufacturing process which involves injecting heated plastic under pressure into a mould. Its costs include start-up costs for tooling, so this process is more expensive than additive manfuacturing at first. But as the number of parts produced increased, injection moulding catches up due to its lower cost per additional part.</p>
<p><img alt="Remote control from the Sculpteo study" src="../images/sculpteo-remote.png"> </p>
<p>The average break-even point was 436 units. After that, injection-moulding was less expensive per part.</p>
<blockquote>
<p>“Should the surface finish and material properties of the 3D printed part serve the needs of the desired application, then 3D printing remains an economical manufacturing method for up to 500 unit production runs (dependent on unit size)." - Sculpteo</p>
</blockquote>
<p>And bear in mind that Sculpteo had every incentive to make sure this figure was as good as possible! As an additive manufacturing bureau they naturally want to portray their technologies favourably.</p>
<p>Better software has also improved printing results; improvements in slicing engines, better design of support materials, semi-automatic design and placement of struts all contribute toward higher quality prints. Bedrich Benes, an academic at Purdue University, and Radomir Mĕch, from Adobe Systems worked on development of software to improve CAD files. TMĕch explained to me during an interview for my Masters project</p>
<blockquote>
<p>“So there are basically two stages. One is that you can detect structural issues. And this can be found somewhere on the market. And the second thing is that you solve them. And you can solve them during the design phase, when you are creating the 3D object. [Or] you can solve them post when the object [is] created.”</p>
</blockquote>
<p>Their work has been very useful to the professional 3D printing community in reducing the costly cases where an unprintable part is sent out to be printed. The software they developed can do things like increase the width of a fragile neck on a sculpture, to improve the odds that it will print successfully. </p>
<p>Software can also be useful for lightweighting objects to be 3D printed. ‘Inspire’ software from solidThinking generates optimal organic shapes and struts from given envelopes, minimising material usage and maximising strength in the printed objects. Their <a href="http://www.solidthinking.com/ExploreStories.aspx?item=Stories&amp;category=Explore">case studies</a> showcase the software's ability to reduce weight by 50% or more.</p>
<blockquote>
<p>""We are very satisfied with the results achieved. We have realized better designs and could fulfill all structural requirements in a shorter term." - Juan Manuel Romero, Alstom, solidThinking case study.</p>
</blockquote>
<p>Although in the Alstom case study time to manufacture was shortened, this was because the iterative cycle of design optimisation was shortened – the actual additive printing process usually still takes longer than conventional casting or milling. As <a href="https://www.protolabs.com/resources/design-tips/united-states/2015-05/">pointed out by ProtoLabs</a>: </p>
<blockquote>
<p>“The process of melting metal one ultra thin layer at a time also isn’t terribly fast — our instruments may take a few days to build. For many parts, CNC machining remains the most economical choice.” - Protolabs, Manufacturing Design Tips.</p>
</blockquote>
<p><a href="http://www.plunkettassociates.co.uk/processes/direct-metal-laser-sintering-dmls.php">Plunkett Associates</a>, who deal in conventional and additive metal prototyping, explain </p>
<blockquote>
<p>“There are limitations to be aware of, slow build speed, restriction of build volumes… support structures are required…these can be difficult to remove.”</p>
</blockquote>
<p>This is reflected in the timescales – DMLS takes 2 weeks for Plunkett to turn around, sand casting just one week. Software solves important structural design problems unique to additive manufacturing, but has not enabled any radical improvements in speed.</p>
<h1>Fundamental Limits</h1>
<h2>Speed</h2>
<p>Time taken to create an object is proportional to the number of printed layers. This is a more powerful effect than x and y movements in additive technologies. Whether it is a swipe and refresh stroke to lay fresh powder down, the movement of an object in a resin bath or the motion of an FDM extruder, z motion is the most crucial. As Joseph DeSimone says <a href="https://www.ted.com/talks/joe_desimone_what_if_3d_printing_was_25x_faster">“There are some mushrooms that grow faster than 3D printed parts.”</a>. To print parts quickly, they must be thin, with few layers - not very '3D' at all.</p>
<p>Some like Rob Winker of Stratays will argue that this <a href="http://www.stratasys.com/~/media/Main/Secure/White-Papers/WP_FDM_TruthAboutSpeed.pdf?la=en">doesn’t matter much</a> if you are accustomed to leaving the printer running overnight. But this approach fundamentally limits additive manufacturing to small batch production. Imagine being told you could only produce <a href="https://youtu.be/ixPhogfZTHU?t=2m16s">car body panels</a> by leaving the machine running slowly overnight!</p>
<p>Print head speed and acceleration restricts the speed at which the printer can produce each layer. This is a somewhat artificial limit – one can imagine a printer where the head(s) are stationary and a belt is swept underneath at high speed. In DMLS and SLA (selective laser sintering) the problem turns into a raster scanning one – how fast a laser may sweep across a bed of powder or a tank of resin while laying out a pattern. </p>
<p>Fundamental speed restrictions are dictated by the physical properties of print materials that must melt and solidify. Take the example of depositing ABS using a heated extruder nozzle. <a href="http://www.extrudable.me/2013/04/18/exploring-extrusion-variability-and-limits/">An elegant study</a> by Stuart Oliver determined the speed limits on PLA for the Ultimaker extruder to be around 8 – 10 mm3/sec for a 0.4mm diameter nozzle. After that point </p>
<blockquote>
<p>“the constant excessive push of plastic into the hot end raises the pressure in the molten plastic, making it more likely that the molten plastic, unable to escape the way it is supposed to go, will instead find its way back up … and form a jam”.</p>
</blockquote>
<p>This is not only a plastics issue. Currently, “steel powder is quite slow” and “expensive equipment (is) needed for essential post-processing” according to the textbook <a href="http://eu.wiley.com/WileyCDA/WileyTitle/productCd-1860583903.html">'Developments in Rapid Casting'</a>.</p>
<h2>Expense</h2>
<p>There is a fundamental disconnect between price of hobbyist desktop equipment and the price of professional machines. No hobbyist could to afford to buy or run a metal sintering machine. Print bureaux give more access to the technology, but at a high price of £25+ typically for a small metal part. Regardless of machine, there is little economy of scale in additive manufacture. If an increase in production volumes is needed, manufacturers naturally turn to conventional processes. <a href="https://www.3dprint-uk.co.uk/management-of-expectations/">“Generally the material is expensive to buy, and the process is slow”</a> advises print service bureau 3D Print UK.</p>
<p>There has been enlightening <a href="http://gizmodo.com/why-3d-printing-is-overhyped-i-should-know-i-do-it-fo-508176750">comparison</a> of desktop 3D printers to the bread making machine fad of the '90s – appealing as a novel concept, but not about to replace conventional mass production methods due to cost and inconvenience.</p>
<p>Cost of materials is very high, typically around £35/kg for high quality plastic filaments, and ten times that or more for resins and powders. Some of these materials will inevitably be wasted due to swipe and refresh mechanism operations, support material printing and resin exposure to light. This raises product costs further. Compare this to the raw material prices when purchasing even high quality engineering plastics in bulk and the enduring appeal of conventional methods becomes clear.</p>
<p><img alt="Material cost comparison" src="../images/price-chart.png">
<em>Note this is a <strong>logarithmic</strong> scale.</em></p>
<blockquote>
<p>“Sadly for every request we have for a full sized Daft Punk helmet, there’s an equal number of disappointed Daft Punk fans out there, when they find out how much it will cost to build” - Nick Allen, <a href="http://gizmodo.com/why-3d-printing-is-overhyped-i-should-know-i-do-it-fo-508176750">Why 3D Printing is Overhyped (I Should Know, I Do It For A Living)</a>.</p>
</blockquote>
<h2>Materials</h2>
<p>In general, chemistry must be precisely understood and controlled – particularly as it relates to surface wetting since this controls the height and resolution of layers and interlayer bonding in droplet based printing. High wetting tends to give thinner layers with a stronger bond.</p>
<p>Materials for additive manufacture are peculiarly vulnerable to changes in the environment that have a knock-on effect on print quality. Humidity, ambient temperature, reel storage time and conditions all affect results for plastic prints. Excess humidity causes water absorbent filaments such as nylon to noticeably swell and PLA filament to become more brittle and degrade. </p>
<p>New materials are being developed continually for additive manufacturing. The range now includes ceramics, elastomers, composites and waxes. These materials do not deliver any changes to the speed of manufacture however, and each material has its <a href="https://ultimaker.com/en/community/16357-why-does-my-print-have-tiny-zebra-stripes?page=9">own</a> <a href="http://3dprintingfromscratch.com/2015/06/top-tips-for-using-ninjaflex-filaments/">unique</a> <a href="http://learn.colorfabb.com/how-to-print-with-woodfill/">challenges</a> in printing.</p>
<h2>Maintenance and reliability</h2>
<p>OEE, Overall Equipment Effectiveness, is used by manufacturing engineers as a measure of the percentage of time equipment is used for making useful products. “World class” OEE for machining centres and other non-continuous processes is about 85%. Continuous, 24 hour/day processes like the extrusion of pipes or beams <a href="http://ieeexplore.ieee.org/xpl/login.jsp?tp=&amp;arnumber=5412049&amp;url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D5412049">can achieve 90% OEE or greater</a>. Additive manufacturing tends to fall far beneath this, though it is difficult to gather exact data due to the secrecy of the main players. Additive manufacturing machines are most suited to custom production runs and small order quantities, which brings down OEE metrics further. Due to these restrictions, few final parts are made using additive techniques. <a href="https://wohlersassociates.com/">Wohlers’ surveys</a> indicate less than a quarter of additive sales are of functional parts. Their data from 2011 indicates around 13% of sales are direct part production. Additive production is still dominated by research and prototyping.</p>
<h2>Surface finish and post-processing</h2>
<p>A common myth about additive manufacturing is that parts require no assembly or post-processing. In fact, extensive finishing is required to give printed models an appearance comparable to moulded parts.  These finishing techniques are considered a 'dark art'.</p>
<p><img alt="Squirrel finished with acetone smoothing technique" src="../images/squirrel-acetone.jpg">
<em>Squirrel models finished with <a href="http://blog.reprap.org/2013/02/vapor-treating-abs-rp-parts.html">actone vapour smoothing</a> by the fine folks at the RepRap blog.</em></p>
<p>As <a href="http://makezine.com/projects/make-34/skill-builder-finishing-and-post-processing-your-3d-printed-objects/">Matt Griffin</a> explains, </p>
<blockquote>
<p>“Makers who have mastered finishing techniques are granted wizard status by fellow 3D practitioners.”</p>
</blockquote>
<p>Examples of surface artefacts from additive processes include white marks which can appear after support material is removed, ‘stair stepping’ marks and grainy surfaces. Stair stepping marks are more noticeable on shallower curved surfaces and are <a href="http://www.shapeways.com/materials/strong-and-flexible-plastic">“a natural artifact of 3D printing”</a> which cannot be avoided. Parts must often be smoothed, varnished or coloured after printing and will rarely achieve a mirror finish. These problems are not restricted to amateur users – all reputable print bureaux have a disclaimer section about finishing. 3D Print UK point out that these disadvantages are <a href="https://www.3dprint-uk.co.uk/management-of-expectations/">“either ignored or misrepresented by many sources on the internet and elsewhere”</a></p>
<h2>Mechanical properties, accuracy and design</h2>
<p>Layerwise construction leads to mechanical weaknesses. These are inherent to the production process and difficult to avoid entirely. The orientation of a part on the build plate has a large and unpredictable impact on its strength and function.  In the z direction parts tend to be weaker and can sometimes even be broken apart with bare hands. Thus, manufacturing parts such as springs with demanding mechanical properties additively is difficult. </p>
<p>Accuracy can be a problem – users cannot simply print from a CAD file and expect the dimensions to match up, especially with desktop machines. In theory, printing complete mechanisms such as gearboxes in one piece is possible. In reality, it is often too difficult to be worthwhile even for a professional workshop. 3D Print UK say about SLS </p>
<blockquote>
<p>“It is always better to manufacture the parts individually and then assemble them after. Even better, buy off the shelf gears from a supplier and 3D print the box that holds them all together.”</p>
</blockquote>
<p>Designers must also account for warping, shrinkage, and laboriously troubleshoot failures. <a href="http://pencerw.com/feed/2015/3/15/3d-printing-titanium-and-the-bin-of-broken-dreams">Spencer Wright laments</a></p>
<blockquote>
<p>“DMLS is anything but plug-and-play. Even when a design has been optimized specifically for the process, it often takes dozens of tries before a functional part comes out of the printer. And the process of troubleshooting a failed build — even at the most advanced DMLS shops in the world — still involves a lot of trial and error.”</p>
</blockquote>
<h2>Limits to the shapes that can be printed</h2>
<p>The hype leads many to think that additive manufacturing can make any product. This is incorrect. Mastery of the limitations of the technologies can take a lifetime. Designers must use their knowledge of additive processes to craft appropriate parts, just as they have learned to work with the limitations of each conventional process. The spectrum of difficulty is not linear– similar products can be vastly different to manufacture. </p>
<ul>
<li>
<p>2+D printing is relatively straightforward. It restricts model designs to prisms and pyramids. It can be done with less viscous materials such as food substances that tend to spread on printing. </p>
</li>
<li>
<p>Overhangs are more difficult. The critical angle of collapse is different for each material. Holes and hollow structures may be created using overhangs, though not all hollow structures are possible. </p>
</li>
<li>
<p>Bridging across unsupported gaps is the most difficult, yet it is needed to create versatile 3D structures with all the benefits consumers are familiar with. Some materials cannot be bridged and most can only bridge a limited gap length. Some techniques and materials allow unlimited bridging due to inherent support material presence, for instance sintering, but sometimes it cannot be done at all.</p>
</li>
</ul>
<p>Depending on materials, some things are just not possible with current technologies: large parts, very thin wall sections, wires, or completely enclosed parts with no escape holes in powder sintered materials. <a href="http://pencerw.com/feed/2015/8/6/3d-printing-titanium-learning-to-learn-from-success">“For instance, a Klein bottle could be printed in metal – but no matter how you oriented it, there would likely always be support structures stuck inside its fat end.”</a> Interlocking parts or pre-assembled structures are one of the most hyped things about additive manufacture, yet these are not possible in many materials either. Shapeways explain that in steel they cannot produce interlocking or enclosed parts because <a href="http://www.shapeways.com/materials/steel">“While the product is being transferred from the printer to the infusion chamber, it exists in a delicate "green state" which does not support interlocking parts.”</a></p>
<h1>Looking to the Future</h1>
<p>It's exciting to think of a line speed, fully additive manufacturing process overcoming these limitations. There are some impressive-looking technologies and products out there that seem to demonstrate the great potential of additive manufacture at true line speed. I'll examine each in turn to determine whether they are truly revolutionary advances, or only incremental ones.</p>
<h1>Faster FDM printers?</h1>
<p><img alt="Mini Kossel" src="../images/mini-kossel.jpg"></p>
<p>Delta printers such as the <a href="https://sites.google.com/site/321soldersucker/random-ramblings/mini-kosseldeltaprinter">Mini Kossel</a> are a recent development in the FDM arena. These typically offer <a href="http://blog.think3dprint3d.com/2015/10/mini-kossel-think3dprint3d-release-3.html">speeds of up to 320mm/s</a>, compared to 100mm/sec for an average Cartesian FDM set-up. This is because of the way their heads move - instead of x-y-z Cartesian motion the print head is held on 3 tilting arms from above, which requires more processing power from the printer controller to work out motion paths. This is definitely useful but not a game-changing improvement in speed – and begins to run into the fundamental material limits on laying down plastic.</p>
<p>Software improvements are likely to deliver better bed space optimisation, automatic strut placement and strengthening and better processing of CAD files. Hopefully we'll see even better expert software systems to optimise parts for the limitations of additive manufacturing. However, even this would just allow the factors already understood by expert designers to be taken advantage of by ordinary users. </p>
<p>High throughput extrusion heads such as the <a href="http://e3d-online.com/">Volcano</a> from E3D Online may improve print speed for FDM plastics – pushing the bottleneck back to the acceleration the print-head is capable of. “By simultaneously increasing the amount of plastic the hotend can process per second and also increasing the maximum layer height we can gain drastic reductions in print time.” Typical reductions are <a href="http://e3d-online.com/blog/volcano_release">around 40% compared with a standard 0.4mm hotend</a>. However, there is a trade-off between speed and resolution. </p>
<h2>New technology?</h2>
<p>Intelligent Liquid Interface technology from NewPro3D  and Continuous Liquid Interface Production from Carbon3D are very similar technologies which claim speeds of up to 25 – 100 times faster than conventional stero-lithography. These companies are currently the <a href="https://www.forbes.com/sites/aarontilley/2015/11/04/how-carbon3d-plans-to-transform-manufacturing/">“hottest startups to come along in the emerging 3-D printing industry”</a> and have already attracted much venture capital funding.</p>
<p>Their (similar) technologies are indeed very promising. The underlying concept is similar to standard stereo-lithography. The operating principle is pulling the printed object out of a bath of liquid that is shielded from the UV cure by a selectively permeable membrane. Oxygen flux through the ‘build window’ is controlled. Oxygen inhibits the cure and UV enables it. This can potentially achieve smooth, ‘layer-less’ construction and very tall parts, fast. Figures from NewPro3D give 4.5 minutes for a standard hollow ball. In comparison the same product will take 180 minutes with Polyjet, 690 minutes with SLA.</p>
<p>This is far faster than any other additive technology, but is it game-changing? There is still a curing time limitation and some concern about the physical properties of the finished resin parts.  It is likely the parts will degrade in sunlight as normal SLA parts tend to. Carbon3D has <a href="http://www.carbon3d.com/materials">the most compelling data</a> to back up its material development and assuage these concerns. But they admit only a few materials will be eligible for their techniques. There are also valid concerns about vibrations and dust contamination of the feed pool. As experienced analysts pointed out</p>
<blockquote>
<p>“3D printer breakthroughs are like battery breakthroughs and cancer cures: there is a new one every week, and yet, remarkably, very few ever make it to market. Of course, progress is being made although a lot of that is much slower than you would imagine” - <a href="https://dunstewart.wordpress.com/2015/03/22/is-the-carbon-3d-printing-technology-a-breakthrough-or-just-hype/">Is the new Carbon3D Printing Technology a Breakthrough or Just Hype?</a></p>
</blockquote>
<h2>Reducing materials costs?</h2>
<p><img alt="Filament &quot;factory&quot;" src="../images/filament-home.jpg">
<em><a href="http://www.instructables.com/id/Build-your-own-3d-printing-filament-factory-Filame/">You</a> too could spend <a href="http://forums.reprap.org/read.php?70,205005,page=1">years</a> recreating a piece of industrial plastic handling equipment in your own home!</em></p>
<p>Locally extruding filament could reduce the large cost of materials for FDM prints and help the environment by recycling plastic. <a href="http://www.sciencedirect.com/science/article/pii/S0959652614001504">One study</a>  says “widespread adoption of in-home recycling of post-consumer plastic represents a novel path to a future of distributed manufacturing” However, this is not straightforward. Any injection moulding engineer will tell you that controlling the quality of plastic feedstock can be very challenging. It is not as simple as regrinding old prints or milk bottles and using them to feed a fresh filament, as suggested in the media. There will be problems with plastic degradation, producing consistently sized filaments, incompatibility of different types of plastics and pigments. Consumers would need to become plastics experts in their own homes. Typical user comments:</p>
<blockquote>
<p><a href="https://groups.google.com/forum/#!topic/flashforge/OZPyzDW6NqI">“Drop the idea now… We extruded some filament. NONE of it is usable... And if you think you have problems printing now – just add wonky self-made filament to the mix.”</a></p>
</blockquote>
<h2>Greater co-operation?</h2>
<p>As an industry, additive manufacturing as a production technique is still trapped in a dark age of trade secrets and low collaboration. As <a href="http://pencerw.com/feed/2015/8/6/3d-printing-titanium-learning-to-learn-from-success">Spencer Wright says</a></p>
<blockquote>
<p>“a part’s layer boundaries reveal its build orientation, and even with careful clean-up it’s generally possible to tell which surfaces have had support structures removed from them. In short, manufacturing forensics is, with enough experience and care, fairly reliable. And yet orientation and support structure setups are almost always treated as closely guarded secrets.”</p>
</blockquote>
<p>No company can overcome all of the additive limitations, but progress may become faster with greater knowledge sharing, following the example of the open-source movements. Indeed, much of the progress on desktop machines was driven by open sharing of information by hobbyists worldwide and the efforts of public-spirited organisations like the <a href="https://en.wikipedia.org/wiki/RepRap_project">Rep Rap Project</a>, which has released all of its designs under the GNU Public License. Perhaps the same will begin to happen with the larger, more industrial machines as well.</p>
<h1>Where do we go from here?</h1>
<p>Even if there is no great breakthrough in speed over the next few years, there will continue to be promising improvements. Meanwhile, consumers are clamouring for the advantages of additive products, so what can manufacturers do? They should take a measured approach - using the advantages additive technologies can offer, if appropriate to their business, while remaining realistic about the limitations and peculiarities of each process.</p>
<p>Sheer output has <em>never</em> been the strong point of additive manufacturing. It will never beat conventional techniques for a given object in mass production. When producing cans en masse, manufacturers will always benefit from a specifically-designed can-making machine. Additive manufacture is like a Swiss Army Knife – useful for many tasks, but not better for any one task better than the specific tool designed for that task. It gives the advantages of customisation and shorter lead times for individual parts, which leads to ease of prototyping. But it can’t replace the power-tools of conventional mass production for larger scale manufacture.</p>
<p><img alt="Jack of All Trades, master of none" src="../images/swiss-army-knife.jpg">
<em>Jack of all trades, master of none.</em></p>
<p>Consumers, designers and engineers must be educated out of the idea that additive manufacturing will solve everything. It is a powerful design and prototyping tool with some limited production applications. That is all it is. The question to bear in mind is, could the part be made more easily another way? Additive manufacture is seen as ‘sexy’ and is an accessible way to start making things as a beginner (especially with desktop machines). This is often an issue for start-ups and designers who have little experience in the workshop. They tend to focus on additive manufacture as a technology that they can understand. They can use it in producing prototypes and improving their designs. It is intuitive, safe and accessible for beginners familiar with CAD tools. A desktop printer can find a place in a design house where a milling machine might not. However, when it comes to scaling up production designers may fail to progress to the next stage and look at other more suitable production processes such as plastic moulding, die stamping or turning on a lathe.</p>
<blockquote>
<p>“Thing is, I’m quite versatile in using bandsaws or mills or things like that. If I make it by hand, I make it properly. But if they can use them (3D printers) they will use them,” - James Beeby, interviewee.</p>
</blockquote>
<p>‘MakeSpaces’ and 'HackerSpaces' (like <a href="http://makespace.org/">our own one in Cambridge</a>) can help to solve this problem by exposing designers to conventional workshop tools and making them aware of the limitations of additive manufacturing alone. Better education in schools and universities is also crucial, and must wherever possible allow students to get <em>hands-on experience</em> of other tools. Lastly, prototyping houses must do their part to educate the users of their services. A good example of this approach is Shapeways recently publicising <a href="http://www.shapeways.com/tutorials/design_rules_for_3d_printing">Dominik Sippel’s research</a> on the limitations of their EOS SLS technology.</p>
<h1>'Cheating'</h1>
<p><img alt="FoodJet's icing dispense technology" src="../images/foodjet.png">
<em>Example of FoodJet's icing decoration capability</em></p>
<p>We don't actually need full 3D capability in order to take advantage of additive manufacturing technologies in production. ‘Cheating’ using only 2D+ printing is an entirely valid approach if it delivers what the consumer wants. Many successful ‘3D printing’ companies actually only provide a 2D+ late stage customisation service. For instance, <a href="https://boomf.com/">Boomf</a> exploits the high speed of full colour edible 2D printing onto ready-made conventionally produced marshmallows. <a href="http://www.foodjet.com/">FoodJet</a> brings 2D+ printing to the food industry with computer controlled graphical decorating, cavity filling and shape depositing. The limit in height means its printers can be integrated onto full-speed production lines. Selective potting and sealing with resins in the electronics industry is another example of successful 2D+ printing.</p>
<h1>Co-Design</h1>
<p><img alt="Makie Dolls" src="../images/makie2.jpg">
<em>Makie dolls made through customiser app</em></p>
<p>Co-design allows customisation within achievable limits and hides inherent compromises from customers. A process which allows users to make some design choices within a constrained space of options. This means people can customise a 3D printed object, but don't have to worry about ending up with something that is unprintable. Companies in this space include <a href="https://mymakie.com/">MakieLab</a>, whose popular, “free and fun app” allowed customers to design their own dolls “without you having to have any knowledge of 3D modelling or the manufacturing process”, the <a href="http://www.3dprinterworld.com/article/music-drop-3d-printed-music-boxes">Music Drop customisable music box</a> and Shapeways' <a href="https://www.shapeways.com/creator/custom-ring/#landing">Ring Customiser</a>.</p>
<p>Using additive manufacturing to create just part of the form of the finished product is also a valid approach that takes advantages from both spaces. For instance, <a href="https://www.candymechanics.com/">Candy Mechanics</a> has made ‘3D printed’ chocolate lollipops in the shapes of people's faces. These use additively manufactured mould templates produced using desktop FDM. Vacuum forming creates the actual mould. The potential to use additive moulds in injection moulding is very exciting – creating custom printed injection moulding tools for lower volume runs or custom production will bridge the gap between personalised batch production and mass production reducing costs and time-to-market. This is <a href="http://uk.3dsystems.com/learning-center/case-studies/bi-link-takes-no-compromise-road-producing-3d-printed-injection-molds">already being used for medical device development</a>, which requires many design iterations of small runs of mouldings. </p>
<p><img alt="Medical part mould created additively" src="../images/medical-mould.jpg">
<em>Medical mouldings already use this technique</em></p>
<h2>A more realistic approach</h2>
<p><a href="http://www.frederiklean.com/3d-printing-hype-party/">Klaus Højbjerre</a> at the AM department of the Danish Technological Institute observes </p>
<blockquote>
<p>“While some people are obviously blinded by the hype, others are getting their hands dirty working with the technology right now. Not as the grand replacement of every existing manufacturing technology, but rather as complementary technology opening up new possibilities and markets.”</p>
</blockquote>
<p>These areas, not the hyped idea of fully replacing all high-volume production with additive techniques, are where the most exciting and realisable advances will take place over the next few years. Over-enthusiasm about additive manufacture obscures these facts and leads to disillusionment and a lack of real progress. By keeping our feet on the ground and maintaining a clear understand of what is suitable for 3D printing and what isn't, we can really get somewhere.</p>
<p>Happy printing!</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../additive-manufacturing-rant.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/additive-manufacturing.html" class="tags">additive manufacturing</a>
                    &nbsp;<a href="../tag/3d-printing.html" class="tags">3D printing</a>
                    &nbsp;<a href="../tag/hype.html" class="tags">hype</a>
                    &nbsp;<a href="../tag/manufacturing.html" class="tags">manufacturing</a>
                </div>
		<a href="../additive-manufacturing-rant.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Feb 13, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../monkey-patching.html" rel="bookmark" title="Permanent Link to &quot;Monkey Patching Reprise&quot;">Monkey Patching Reprise</a>
                </h2>

                
                

                <p>It turns out that things aren't as simple as they seemed in my last post. A couple of people have pointed out to me that Python can indeed do monkey patching - so what's the difference between this and Ruby? Am I just making a fuss over nothing? First of all, to some proper definitions.</p>
<h1>What Even Is Monkey Patching?</h1>
<p>It's also known as guerilla (/gorilla) patching, hot-fixing, and more recently, 'duck-punching'.</p>
<blockquote>
<p><strong>Geoffrey</strong>: Now, you went to PyCon a couple months ago. And it’s well-known that in the Python world, they frown on monkey-patching. Do you think they would think more positively of duck-punching?</p>
<p><strong>Adam</strong>: No, I think they will continue to look down on us, no matter how awesome and hilarious we become.</p>
<p><strong>Voice In Background</strong>: Isn’t that the truth.</p>
<p><strong>Geoffrey</strong>: I also have Patrick Ewing. Is this a good idea, and will it catch on?</p>
<p><strong>Patrick Ewing</strong>: Well, I was just totally sold by Adam, the idea being that if it walks like a duck and talks like a duck, it’s a duck, right? So if this duck is not giving you the noise that you want, you’ve got to just punch that duck until it returns what you expect.</p>
<p><a href="https://web.archive.org/web/20120114085702/http://podcast.rubyonrails.org/programs/1/episodes/railsconf-2007">Transcript from Geoffrey Grosenbach podcast</a> at RailsConf2007</p>
</blockquote>
<p>Monkey patching can mean some subtly different things:</p>
<ul>
<li>Changing a class's methods at runtime</li>
<li>Changing a class's methods at runtime <em>and making all the instances of that class change after the fact</em></li>
</ul>
<p>As pointed out in <a href="http://stackoverflow.com/questions/192649/can-you-monkey-patch-methods-on-core-types-in-python">this thread on StackOverFlow</a> by Dan Lenski, both variants are indeed possible with Python. Here's an example:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="n">Widget:</span>
    <span class="n">def</span> <span class="n">__init__</span>(<span class="k">self</span>):
       <span class="nb">pass</span>
    <span class="n">def</span> <span class="n">who_am_i</span>(<span class="k">self</span>):
       <span class="nb">print</span>(<span class="s">&quot;I&#39;m a widget&quot;</span>)

&gt;&gt;&gt; <span class="n">my_widget</span> = <span class="n">Widget</span>()
&gt;&gt;&gt; <span class="n">my_widget</span>
<span class="s">&lt;Widget object at 0x7f6b5aa52e80&gt;</span>
&gt;&gt;&gt; <span class="n">my_widget</span>.<span class="n">who_am_i</span>()
<span class="n">I&#39;m</span> <span class="n">a</span> <span class="n">widget</span>
&gt;&gt;&gt; <span class="n">def</span> <span class="n">teapot</span>(<span class="k">self</span>):
...     <span class="nb">print</span>(<span class="s">&quot;I&#39;m a little teapot&quot;</span>)
...
&gt;&gt;&gt; <span class="n">Widget</span>.<span class="n">who_am_i</span> = <span class="n">teapot</span>
&gt;&gt;&gt; <span class="n">my_widget</span>.<span class="n">who_am_i</span>()
<span class="n">I&#39;m</span> <span class="n">a</span> <span class="n">little</span> <span class="n">teapot</span>
&gt;&gt;&gt; <span class="n">new_widget</span> = <span class="n">Widget</span>()
&gt;&gt;&gt; <span class="n">new_widget</span>.<span class="n">who_am_i</span>()
<span class="n">I&#39;m</span> <span class="n">a</span> <span class="n">little</span> <span class="n">teapot</span>
</pre></div>


<p>And Python doesn't warn you either! So perhaps I was unfairly harsh to Ruby? Not quite.</p>
<h1>One <em>Important</em> Difference</h1>
<p><em>Unlike</em> with Ruby, we can't monkeypatch the basic built-in classes, such as <code>int</code>, <code>float</code> or <code>str</code>. This is because they are defined in C extension modules which are immutable. These modules are shared between multiple interpreters and made immutable for efficiency (and safety)'s sake. So when you try to change the behaviour of the built-ins, you can't -</p>
<div class="highlight"><pre>def own_up(self, a_string):
    return a_string.length()*&quot;!&quot;

&gt;&gt;&gt;my_string = &quot;Hello, World!&quot;
&gt;&gt;&gt; my_string.upper()
&#39;HELLO, WORLD!&#39;
&gt;&gt;&gt; str.upper = own_up
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
TypeError: can&#39;t set attributes of built-in/extension type &#39;str&#39;
</pre></div>


<p>To do something which approximates the effects of monkeypatching a built-in we have to subclass, like so - this example lets us write a custom instance of the str.upper() method by inheriting from str.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="n">CustomString</span>(<span class="n">str</span>):
    <span class="n">def</span> <span class="n">upper</span>(<span class="k">self</span>):
        <span class="n">desired_value</span> = <span class="s">&quot;!&quot;</span> * <span class="n">len</span>(<span class="k">self</span>)
        <span class="k">return</span> <span class="n">CustomString</span>(<span class="n">desired_value</span>)

&gt;&gt;&gt; <span class="n">custom</span> = <span class="n">CustomString</span>(<span class="s">&quot;hello world&quot;</span>)
&gt;&gt;&gt; <span class="n">custom</span>
<span class="s">&#39;hello world&#39;</span>
&gt;&gt;&gt; <span class="n">custom</span>.<span class="n">upper</span>()
<span class="s">&#39;!!!!!!!!!!!&#39;</span>
</pre></div>


<p>Ta-da! I still maintain that this is saner behaviour than Ruby.</p>
<p>(Sidenote - Remember, for str and any class based on it, Python strings are immutable - when we call methods on a string, we just get a new return value that we have to assign to some other string object to store.)</p>
<h1>If Python and Ruby do it in similar ways, is Monkey Patching even All That Bad, then?</h1>
<p>Yes! I still maintain that monkey patching is dangerous and shouldn't be used often. I think it says something positive about Python that it's not something you need to know intimately in order to program competently in the language, and indeed most Python programmers I know feel a bit iffy about it. It's a little off-putting (to say the least) to realise how much of a way of life it is for Ruby programmers.</p>
<p>But don't just take my word for it - have a read of this <a href="http://www.virtuouscode.com/2008/02/23/why-monkeypatching-is-destroying-ruby/">insightful blog post</a> by Avdi Grimm, an experienced Rubyist worried about the impact of thoughtless 'hip' monkey patching - a choice quote:</p>
<blockquote>
<p>Where I work, we are already seeing subtle, difficult-to-debug problems crop up as the result of monkey patching in plugins.  Patches interact in unpredictable, combinatoric ways.  And by their nature, bugs caused by monkey patches  are more difficult to track down than those introduced by more traditional classes and methods.  As just one example: on one project, it was a known caveat that we could not rely on class inheritable attributes as provided by ActiveSupport.  No one knew why.</p>
</blockquote>
<p>A fun (scary) read.</p>
<h1>Temporary Monkey Patching in Python for testing</h1>
<p>As I was looking around at this stuff, I discovered there are a couple of libraries, <a href="https://docs.python.org/3/library/unittest.mock.html#patch"><code>unittest.mock.patch</code></a> and <a href="http://docs.pytest.org/en/latest/monkeypatch.html"><code>pytest monkeypatch</code></a> designed to allow <em>temporary</em> monkeypatching for testing - when the function or statement using it exits, the patch disappears. I can see how useful it would be to set up mocks in this controlled way, rather than having to worry about it affecting all of your tests. It was deemed so handy that <code>mock</code> is now part of the standard library in Python3. Time to investigate further!</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../monkey-patching.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/ruby.html" class="tags">Ruby</a>
                    &nbsp;<a href="../tag/python.html" class="tags">Python</a>
                </div>
		<a href="../monkey-patching.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Feb 02, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="../first-ruby.html" rel="bookmark" title="Permanent Link to &quot;First Steps Exploring Ruby&quot;">First Steps Exploring Ruby</a>
                </h2>

                
                

                <p>Last night I went to the first of the <a href="https://www.meetup.com/Cambridge-Programmers-Study-Group/">Cambridge Programmers' Study Group</a> new sessions - we're starting to work through the book <a href="http://computationbook.com/">'Understanding Computation: From Simple Machines to Impossible Programs'</a> by Tom Stuart. The book uses practical exercises in Ruby to explain a bunch of theoretical computer science stuff, working up to cellular automata, Turing machines and the lambda calculus (exciting!). As Stuart's blurb explains, the book is aimed at</p>
<blockquote>
<p>An audience of working programmers without assuming any academic background.</p>
</blockquote>
<p>So, people like me.  It sounded like exactly the sort of thing I should be learning, since I don't have a Computer Science background.</p>
<p>One small problem - very few of us in the group actually knew any Ruby! So we spent this session trying to teach ourselves using the examples in the first chapter. It was fun trying to pick up a new language in the company of other people - a lot more companionable than noodling around on your own, and easier to find out cute things about the language because if one person discovered something cool, they shared it with the group. This post will be about some of my first impressions of Ruby.</p>
<h2>Getting Ruby set up</h2>
<p>For those like myself who prefer more instructions than 'download Ruby online!' here's how I did it in the end:
<code>` $ sudo apt-get install ruby-full</code> which on my Ubuntu system downloaded Ruby 2.3, which was just fine for my needs. If you use Windows or Mac I'm told the <a href="https://www.ruby-lang.org/en/documentation/installation/">instructions on the Ruby-lang website</a> are quite helpful and up-to-date. I first tried using the default terminal, irb, which you call from the command line</p>
<div class="highlight"><pre>user@device:~$ irb
irb(main):001:0&gt; 1+2
=&gt; 3
</pre></div>


<p>This works fine for the first few exercises, but I couldn't get auto-indentation to work, important for writing multi-line programs! I tried tinkering around with adding a <code>.irbrc</code> file with <code>require 'irb/completion'</code> as recommended in the comments of the main <code>irb.rb</code> file (which I found in <code>/usr/lib/ruby/2.3.0</code>). This didn't help - perhaps I put the config file in the wrong place? I ended up just using a slightly different terminal, pry, which was recommended by a colleague at the Meetup. It does auto-indentation and colour-coding too, which was very helpful! I don't think I'll be going back to irb. To install that, I just did <code>$ gem install pry</code> (gem is Ruby's package manager). To start using it, just type <code>pry</code> in the command line. </p>
<h2>Ruby is like Python</h2>
<p>Ruby is similar to Python in a lot of ways - this almost hindered me as I kept getting confused between Python and Ruby syntax. It felt like trying to learn Spanish when I already knew some French - confusingly close but distinct. I think ultimately this is helpful (I was mentally translating some things to Python to understand them, and that worked quite well) but to start with it was rather confusing.</p>
<p>Some similarities: <code>yield</code> sort of works the same</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="k">def</span> <span class="n">do_thrice</span>
<span class="o">*</span>   <span class="n">yield</span>
<span class="o">*</span>   <span class="n">yield</span>
<span class="o">*</span>   <span class="n">yield</span>
<span class="o">*</span> <span class="n">end</span>
<span class="o">=&gt;</span> <span class="p">:</span><span class="n">do_thrice</span>
<span class="o">&gt;&gt;</span> <span class="n">do_thrice</span> <span class="p">{</span> <span class="n">puts</span> <span class="s">&quot;Hello world!&quot;</span> <span class="p">}</span>
<span class="no">Hello</span> <span class="n">world</span><span class="o">!</span>
<span class="no">Hello</span> <span class="n">world</span><span class="o">!</span>
<span class="no">Hello</span> <span class="n">world</span><span class="o">!</span>
<span class="o">=&gt;</span> <span class="no">nil</span>
</pre></div>


<p>And the string formatting works <a href="https://docs.python.org/3.6/reference/lexical_analysis.html#f-strings">rather like Python 3.6's new f-strings</a>. So for instance, in Ruby <code>"#{x*2} and also #{y+1}"</code> gives you a string that calculates &amp; inserts those values.</p>
<p>The <code>*</code> operator works in similar ways to unpack elements of an iterable - for instance, you can do fun things like:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">]</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">]</span>
<span class="o">&gt;&gt;</span> <span class="n">b</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
</pre></div>


<h2>Ruby is not like Python</h2>
<h4>Objects! Objects everywhere!</h4>
<p><a href="http://rubylearning.com/blog/2010/09/27/almost-everything-is-an-object-and-everything-is-almost-an-object/">(Almost) everything is an object in Ruby</a>, and it made me realise how I usually write Python in a fairly un-Object Oriented style. I generally avoid writing classes if I can help it (<a href="https://www.youtube.com/watch?v=o9pEzgHorH0">especially classes which only contain two methods, one of which is <strong>init</strong></a> but this isn't really possible in Ruby. I suppose it's good for my soul - having a language that forces you into object-oriented thinking must make you confront what that really means. That's why there are these little <code>=&gt; nil</code> statements scattered around my code examples, by the way - irb and pry always shows you what object your statements evaluate to, and often that's <code>nil</code>, which is the object representing nothing - the 'empty' object, if you're mathematically minded.</p>
<p>I guess I'm going to have to go read those books on Design Patterns after all...</p>
<h4>It's super-terse</h4>
<p>If Python cares a lot about preventing programmers having to type unecessary characters (goodbye <code>;</code> I didn't miss you) then Ruby cares even more. There are a lot of things you can do in one line. Here's a good one:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="p">|</span><span class="n">num</span><span class="p">|</span> <span class="n">num</span><span class="o">.</span><span class="n">even</span><span class="p">?</span> <span class="p">}</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="o">]</span>
</pre></div>


<p>This creates a <code>range</code> which spans the numbers 1 to 10, then looks at all the numbers in that range and, if they are even, adds them to a list and returns the list. Phew!</p>
<p>At times, this can be confusing - for instance, there's no need to write explicit <code>return</code> statements if you don't want to. By default, Ruby returns the evaluation of the last statement in the body of a method. For instance,</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="k">def</span> <span class="n">what_do_i_return</span>
<span class="o">*</span>   <span class="s">&quot;A&quot;</span>
<span class="o">*</span>   <span class="s">&quot;B&quot;</span>
<span class="o">*</span>   <span class="s">&quot;or C?&quot;</span>
<span class="o">*</span> <span class="n">end</span>  
<span class="o">=&gt;</span> <span class="p">:</span><span class="n">what_do_i_return</span>
<span class="o">&gt;&gt;</span> <span class="n">what_do_i_return</span>
<span class="o">=&gt;</span> <span class="s">&quot;or C?&quot;</span>
</pre></div>


<p>You <em>can</em> write explicit return statements, but you don't have to. And the way to get a function to evaluate to <a href="http://stackoverflow.com/questions/5267412/can-ruby-return-nothing">sort-of-nothing</a> is to explicitly return nil (of course!). This returning-by-default is confusing at first, but it seems to fit with the rest of Ruby's style.</p>
<h4>'nil' isn't <em>really</em> nothing</h4>
<p>You can put <code>nil</code> into things, which is hella confusing. For instance, suppose you have an array, you can add nil elements to it:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">my_array</span> <span class="o">=</span> <span class="o">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="o">]</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="o">]</span>
<span class="o">&gt;&gt;</span> <span class="n">my_array</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span>
<span class="o">=&gt;</span> <span class="no">nil</span>
<span class="o">&gt;&gt;</span> <span class="n">my_array</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="o">]</span>
<span class="o">&gt;&gt;</span> <span class="n">my_array</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="no">nil</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="no">nil</span><span class="o">]</span>
<span class="o">&gt;&gt;</span> <span class="n">my_array</span><span class="o">[</span><span class="mi">10</span><span class="o">]</span> <span class="o">=</span> <span class="s">&quot;surprising behaviour&quot;</span>
<span class="o">=&gt;</span> <span class="s">&quot;surprising behaviour&quot;</span>
<span class="o">&gt;&gt;</span> <span class="n">my_array</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="s">&quot;surprising behaviour&quot;</span><span class="o">]</span>
</pre></div>


<p>Assigning to an element beyond the length of the array inserts nils until it reaches that element index (which didn't exist before!) and then it bungs in the thing you assigned. Intriguing!</p>
<h2>Some gripes</h2>
<h4>'Monkey patching'</h4>
<p>Monkey patching is <em>dangerous</em>. It's the way Ruby programmers refer to the ability to dynamically modify classes 'live' - at any time. You can even do this with Ruby's built-in classes, like String. At first glance it sounds really cool - you can just go define a new class method whenever you like! For instance</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span><span class="k">class</span> <span class="nb">String</span>
<span class="o">*</span>    <span class="k">def</span> <span class="n">shouty</span>
<span class="o">*</span>        <span class="n">upcase</span> <span class="o">+</span> <span class="s">&quot;!!!&quot;</span>
<span class="o">*</span>    <span class="n">end</span>
<span class="o">*</span> <span class="n">end</span>
</pre></div>


<p>adds a new 'shouty' method to strings. So now any string can use .shouty, just as if it were a built-in method</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="s">&quot;hello&quot;</span><span class="o">.</span><span class="n">shouty</span>
<span class="o">=&gt;</span> <span class="s">&quot;HELLO!!!&quot;</span>
</pre></div>


<p>But here's the thing - monkey patching can break things really easily - <strong>and Ruby won't warn you about it!</strong> One of the guys sitting next to me at the meet-up managed to break his irb's Array class by redefining some of its built-in methods. Especially if you're new to Ruby and don't know all the built-in class names, it's really easy to <em>accidentally</em> monkey patch your way into disaster. It seems like a really powerful feature, but I'm not happy with how it seems to work. Perhaps with a nice Ruby IDE that reminds you about all the classes you have on-the-go, it's easier to avoid horrible mistakes?</p>
<h4>CONSTANTS - why even bother?</h4>
<p>'Constants' are sort-of a thing in Ruby. If you define a variable with CAPITAL LETTERS, the Ruby interpreter will give you a warning. But it won't do anything about the warning - it'll still change the 'constant' value, and just complain about it. Here's an example:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="no">CONST</span> <span class="o">=</span> <span class="s">&quot;Don&#39;t change me please&quot;</span>
<span class="o">=&gt;</span> <span class="s">&quot;Don&#39;t change me please&quot;</span>
<span class="o">&gt;&gt;</span> <span class="no">CONST</span> <span class="o">=</span> <span class="s">&quot;I changed you anyways!!&quot;</span>
<span class="p">(</span><span class="n">pry</span><span class="p">):</span><span class="mi">224</span><span class="p">:</span> <span class="nf">warning:</span> <span class="n">already</span> <span class="n">initialized</span> <span class="n">constant</span> <span class="no">CONST</span>
<span class="p">(</span><span class="n">pry</span><span class="p">):</span><span class="mi">223</span><span class="p">:</span> <span class="nf">warning:</span> <span class="n">previous</span> <span class="n">definition</span> <span class="n">of</span> <span class="no">CONST</span> <span class="n">was</span> <span class="n">here</span>
<span class="o">=&gt;</span> <span class="s">&quot;I changed you anyways!!&quot;</span>
</pre></div>


<p>What's the <em>point</em> of having this feature? Can we perhaps write larger programs that will catch this warning and not change the constant (well, and change it back, since we warn but change things anyway)? <a href="http://stackoverflow.com/questions/660737/can-you-ask-ruby-to-treat-warnings-as-errors">Basically not at all</a>, apparently! I'm happy to be enlightened by some Ruby-god but as far as I can tell, this feature does nothing except confuse people used to programming in languages where constants exist and are, well, constant.</p>
<h1>Overall Impressions</h1>
<p>I found that during the session I fluctuated between delight ("what a nice way to do that!") and terror/annoyance as things behaved in unexpected ways. It has some peculiarities that particularly stand out to me in comparison with Python, and some features that are just adorably cute. I've been noodling around with it on and off all day today, and still enjoying getting to know it. Overall I'd say it's been fun! I can't say that I'm dying to use it as my new scripting language, but I'll certainly be pleased to become better acquainted as we work our way through the Computation book.</p>
<h4>PS</h4>
<p>Thanks again to <a href="http://www.red-gate.com/">RedGate</a> for hosting the session and feeding pizza to 20+ hungry programmers!</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="../first-ruby.html">posted at 00:00</a>
                    &nbsp;&middot;
                    &nbsp;<a href="../tag/ruby.html" class="tags">Ruby</a>
                    &nbsp;<a href="../tag/understanding-computation.html" class="tags">Understanding Computation</a>
                    &nbsp;<a href="../tag/cpsg.html" class="tags">CPSG</a>
                </div>
		<a href="../first-ruby.html#disqus_thread">Click to read and post comments</a>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Proudly Powered by <a href="http://getpelican.com">Pelican</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>